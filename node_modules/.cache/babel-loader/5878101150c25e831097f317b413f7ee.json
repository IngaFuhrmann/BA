{"ast":null,"code":"import React,{useRef,useEffect}from\"react\";import{select,axisBottom,axisLeft,scaleLinear,scaleOrdinal,scaleBand}from'd3';import useResizeObserver from\"./useReziseObserver\";function BarMobilNutzung(_ref){var data=_ref.data,property=_ref.property,number=_ref.number;var svgRef=useRef();var wrapperRef=useRef();var dimensions=useResizeObserver(wrapperRef);useEffect(function(){var svg=select(svgRef.current);if(!dimensions)return;//Daten filtern\nvar filtered=data.filter(function(a){return a.geo==property;});var xScale=scaleLinear().domain([0,100]).range([0,dimensions.width]);var yScale=scaleBand().domain(data.map(function(value,index){return value.age;})).range([0,dimensions.height-100]).padding(0.2);var color=scaleOrdinal().domain(data.map(function(value,index){return value.age;})).range([\"#2770bc\",\"#5d8dbe\",\"#9aadc2\"]);var xAxis=axisBottom(xScale);svg.select(\".x-axis\").remove();var yAxis=axisLeft(yScale).tickSizeOuter(0).tickSizeInner(0);svg.select(\".y-axis\").style('font-size','14').style(\"font-weight\",\"bold\").style('color','grey').call(yAxis);//Background der Balken\nsvg.selectAll(\".bars\").data(filtered).join(\"rect\").attr(\"class\",\"bars\").attr(\"fill\",'#cdcdcd').style(\"margin-top\",\"10px\").attr('x',xScale(0)).attr('y',function(s){return yScale(s.age);}).attr('width',xScale(100)).attr('height',yScale.bandwidth);//Balken zeichnen\nvar barsEd=svg.selectAll(\".bar\").data(filtered).join(\"rect\").attr(\"class\",\"bar\").attr(\"fill\",function(d,i){return color(i);}).style(\"margin-top\",\"10px\");barsEd.transition().duration(300).attr('x',xScale(0)).attr('y',function(s){return yScale(s.age);}).attr('width',function(s){return xScale(s.time[Object.keys(s.time)[number]]);}).attr('height',yScale.bandwidth);barsEd.on(\"mouseenter\",function(value,index){svg.selectAll(\".tooltip\").data([value]).join(function(enter){return enter.append(\"text\");}).attr(\"class\",\"tooltip\").text(function(s){return s.time[Object.keys(s.time)[number]]+\"%\";}).attr(\"x\",xScale(value.time[Object.keys(value.time)[number]])+5).attr(\"y\",yScale(value.age)+yScale.bandwidth()/1.5).attr(\"opacity\",1).attr(\"font-size\",\"16px\").attr(\"font-weight\",\"bold\").attr(\"fill\",\"#4e4f50\").transition();}).on(\"mouseleave\",function(){return svg.select(\".tooltip\").remove().transition();});},[data,dimensions,property]);return React.createElement(\"div\",{ref:wrapperRef},React.createElement(\"svg\",{ref:svgRef},React.createElement(\"g\",{className:\"x-axis\"}),React.createElement(\"g\",{className:\"y-axis\"})));}export default BarMobilNutzung;","map":{"version":3,"sources":["D:/Studium/Bachelor/FinalHelper/src/components/charts/MobilChartAlter.jsx"],"names":["React","useRef","useEffect","select","axisBottom","axisLeft","scaleLinear","scaleOrdinal","scaleBand","useResizeObserver","BarMobilNutzung","data","property","number","svgRef","wrapperRef","dimensions","svg","current","filtered","filter","a","geo","xScale","domain","range","width","yScale","map","value","index","age","height","padding","color","xAxis","remove","yAxis","tickSizeOuter","tickSizeInner","style","call","selectAll","join","attr","s","bandwidth","barsEd","d","i","transition","duration","time","Object","keys","on","enter","append","text"],"mappings":"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","sourcesContent":["import React, { useRef, useEffect} from \"react\";\r\nimport { select, axisBottom, axisLeft, scaleLinear, scaleOrdinal, scaleBand} from 'd3';\r\nimport useResizeObserver from \"./useReziseObserver\";\r\n\r\n\r\nfunction BarMobilNutzung({ data, property, number }) {\r\n   const svgRef = useRef();\r\n   const wrapperRef = useRef();\r\n   const dimensions = useResizeObserver(wrapperRef);\r\n\r\n   useEffect(() => {\r\n\r\n    const svg = select(svgRef.current);\r\n     \r\n         if(!dimensions) return;\r\n\r\n        //Daten filtern\r\n        var filtered = data.filter(a=>a.geo==property);\r\n\r\n         const xScale = scaleLinear()\r\n         .domain([0, 100])\r\n        .range([0, dimensions.width])\r\n        \r\n         const yScale =  scaleBand()\r\n        .domain(data.map((value, index) => value.age))\r\n        .range([0, dimensions.height - 100])\r\n        .padding(0.2)\r\n\r\n        var color = scaleOrdinal()\r\n        .domain(data.map((value, index) => value.age))\r\n        .range([\"#2770bc\",\"#5d8dbe\",\"#9aadc2\"])\r\n\r\n         const xAxis = axisBottom(xScale);\r\n         svg\r\n          .select(\".x-axis\")\r\n          .remove()\r\n\r\n          const yAxis = axisLeft(yScale)\r\n          .tickSizeOuter(0)\r\n          .tickSizeInner(0);\r\n          svg\r\n            .select(\".y-axis\")\r\n            .style('font-size', '14')\r\n            .style(\"font-weight\", \"bold\")\r\n            .style('color', 'grey')\r\n            .call(yAxis);\r\n\r\n            //Background der Balken\r\n            svg.selectAll(\".bars\")\r\n            .data(filtered)\r\n            .join(\"rect\")\r\n            .attr(\"class\", \"bars\")\r\n            .attr(\"fill\",  '#cdcdcd')\r\n            .style(\"margin-top\", \"10px\")\r\n            \r\n            .attr('x', xScale(0))\r\n            .attr('y', (s) => yScale(s.age))\r\n            .attr('width', xScale(100))\r\n            .attr('height', yScale.bandwidth) \r\n\r\n          //Balken zeichnen\r\n         var barsEd= svg\r\n          .selectAll(\".bar\")\r\n          .data(filtered)\r\n          .join(\"rect\")\r\n          .attr(\"class\", \"bar\")\r\n          .attr(\"fill\",  function(d, i) { return color(i) })\r\n          .style(\"margin-top\", \"10px\")\r\n\r\n          barsEd\r\n          .transition()\r\n          .duration(300)\r\n          .attr('x', xScale(0))\r\n          .attr('y', (s) => yScale(s.age))\r\n          .attr('width', (s) => xScale(s.time[Object.keys(s.time)[number]]))\r\n          .attr('height', yScale.bandwidth)\r\n          \r\n          barsEd.on(\"mouseenter\", (value, index) => {\r\n            svg\r\n              .selectAll(\".tooltip\")\r\n              .data([value])\r\n              .join(enter => enter.append(\"text\"))\r\n              .attr(\"class\", \"tooltip\")\r\n              .text((s) => s.time[Object.keys(s.time)[number]] + \"%\")\r\n              .attr(\"x\", xScale(value.time[Object.keys(value.time)[number]]) + 5)\r\n              .attr(\"y\", yScale(value.age) + yScale.bandwidth() / 1.5)\r\n              .attr(\"opacity\", 1)\r\n              .attr(\"font-size\", \"16px\")\r\n              .attr(\"font-weight\", \"bold\")\r\n              .attr(\"fill\", \"#4e4f50\")\r\n              .transition() \r\n            })\r\n            \r\n            .on(\"mouseleave\", () => \r\n              svg.select(\".tooltip\").remove()\r\n              .transition()\r\n   )\r\n         \r\n  }, [data, dimensions, property]);\r\n  return (\r\n   <div ref={wrapperRef} >\r\n      <svg ref={svgRef}>\r\n        <g className=\"x-axis\" />\r\n        <g className=\"y-axis\" />\r\n      </svg>\r\n    </div>\r\n);\r\n}\r\n\r\nexport default BarMobilNutzung;"]},"metadata":{},"sourceType":"module"}
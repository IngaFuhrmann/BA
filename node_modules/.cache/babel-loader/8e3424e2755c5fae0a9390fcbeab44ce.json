{"ast":null,"code":"var _jsxFileName = \"D:\\\\Studium\\\\Bachelor\\\\WebApp\\\\visapp\\\\src\\\\components\\\\charts\\\\MobilChartBildung.jsx\";\nimport React, { useRef, useEffect, useState } from \"react\";\nimport { select, arc, scaleOrdinal, pie } from 'd3';\nimport useResizeObserver from \"./useReziseObserver\";\n\nfunction PieMobilNutzung({\n  data,\n  property,\n  number\n}) {\n  const svgRef = useRef();\n  const wrapperRef = useRef();\n  const dimensions = useResizeObserver(wrapperRef);\n  useEffect(() => {\n    const svg = select(svgRef.current);\n    if (!dimensions) return; //Daten filtern\n\n    var filtered = data.filter(a => a.geo == property);\n    var width = dimensions.width / 1.5;\n    var outerRadius = width / 2;\n    var innerRadius = 0;\n    var pied = pie().value(d => d.time[Object.keys(d.time)[number]])(filtered);\n    var color = scaleOrdinal().domain(pied).range([\"#2770bc\", \"#5d8dbe\", \"#9aadc2\"]);\n\n    function update(pied) {\n      var u = svg.selectAll(\"path\").data(pied);\n      var arcGenerator = arc().innerRadius(innerRadius).outerRadius(outerRadius);\n      u.enter().append('path').merge(u).transition().duration(1000).attr('d', arcGenerator).attr('fill', function (d, i) {\n        return color(i);\n      }).attr(\"stroke\", \"white\").style(\"stroke-width\", \"2px\").style(\"opacity\", 1);\n      u.enter().append(\"text\").attr(\"transform\", function (d) {\n        return \"translate(\" + arcGenerator.centroid(d) + \")\";\n      }).attr(\"text-anchor\", \"middle\").text(function (d) {\n        return d.data.ed;\n      }).attr(\"fill\", \"white\").attr(\"font-size\", 11);\n      u.enter().append(\"text\").attr(\"transform\", function (d) {\n        return \"translate(\" + arcGenerator.centroid(d) + \")\";\n      }).attr(\"text-anchor\", \"end\").text(function (d) {\n        return d.data.value;\n      }).attr(\"fill\", \"white\").attr(\"font-size\", 11);\n      u.exit().remove();\n    }\n\n    update(pied);\n  }, [data, dimensions, property]);\n  return React.createElement(\"div\", {\n    ref: wrapperRef,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }, React.createElement(\"svg\", {\n    ref: svgRef,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }));\n}\n\nexport default PieMobilNutzung;","map":{"version":3,"sources":["D:/Studium/Bachelor/WebApp/visapp/src/components/charts/MobilChartBildung.jsx"],"names":["React","useRef","useEffect","useState","select","arc","scaleOrdinal","pie","useResizeObserver","PieMobilNutzung","data","property","number","svgRef","wrapperRef","dimensions","svg","current","filtered","filter","a","geo","width","outerRadius","innerRadius","pied","value","d","time","Object","keys","color","domain","range","update","u","selectAll","arcGenerator","enter","append","merge","transition","duration","attr","i","style","centroid","text","ed","exit","remove"],"mappings":"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","sourcesContent":["import React, { useRef, useEffect, useState } from \"react\";\r\nimport { select, arc, scaleOrdinal, pie} from 'd3';\r\nimport useResizeObserver from \"./useReziseObserver\";\r\n\r\n\r\nfunction PieMobilNutzung({ data, property, number }) {\r\n    const svgRef = useRef();\r\n    const wrapperRef = useRef();\r\n    const dimensions = useResizeObserver(wrapperRef);\r\n    \r\n    useEffect(() => {\r\n        const svg = select(svgRef.current);\r\n\r\n        if(!dimensions) return;\r\n\r\n        //Daten filtern\r\n        var filtered = data.filter(a=>a.geo==property);\r\n\r\n        var width = dimensions.width /1.5 ;\r\n        var outerRadius = width/2;\r\n        var innerRadius = 0;\r\n\r\n        var pied = pie().value((d) => d.time[Object.keys(d.time)[ number]])(filtered);\r\n\r\n        var color = scaleOrdinal()\r\n        .domain(pied)\r\n        .range([\"#2770bc\",\"#5d8dbe\",\"#9aadc2\"])\r\n\r\n        function update(pied) {\r\n          var u = svg.selectAll(\"path\").data(pied)\r\n        \r\n            var arcGenerator = arc()\r\n            .innerRadius(innerRadius)\r\n            .outerRadius(outerRadius)\r\n           \r\n          u\r\n            .enter()\r\n            .append('path')\r\n            .merge(u)\r\n            .transition()\r\n            .duration(1000)\r\n            .attr('d', arcGenerator)\r\n            .attr('fill', function(d, i) { return color(i) })\r\n            .attr(\"stroke\", \"white\")\r\n            .style(\"stroke-width\", \"2px\")\r\n            .style(\"opacity\", 1)\r\n         \r\n            u\r\n            .enter()\r\n            .append(\"text\")\r\n            .attr(\"transform\", function(d) {\r\n            return \"translate(\" + arcGenerator.centroid(d) + \")\";})\r\n            .attr(\"text-anchor\", \"middle\")\r\n            .text(function(d) {return d.data.ed})\r\n            .attr(\"fill\", \"white\")\r\n            .attr(\"font-size\", 11)\r\n            u\r\n            .enter()\r\n            .append(\"text\")\r\n            .attr(\"transform\", function(d) {\r\n            return \"translate(\" + arcGenerator.centroid(d) + \")\";})\r\n            .attr(\"text-anchor\", \"end\")\r\n            .text(function(d) {return d.data.value})\r\n            .attr(\"fill\", \"white\")\r\n            .attr(\"font-size\", 11)\r\n            \r\n          u\r\n            .exit()\r\n            .remove()\r\n        \r\n        }\r\n        \r\n        update(pied)\r\n\r\n    }, [data, dimensions, property]);\r\n\r\n\r\nreturn (\r\n    <div ref={wrapperRef} >\r\n       <svg ref={svgRef}>\r\n       </svg>\r\n     </div>\r\n );\r\n }\r\n \r\n export default PieMobilNutzung;"]},"metadata":{},"sourceType":"module"}
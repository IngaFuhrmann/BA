{"ast":null,"code":"import React,{useRef,useEffect}from\"react\";import{select,arc,scaleOrdinal,pie}from'd3';import useResizeObserver from\"./useReziseObserver\";function PieMobilNutzung(_ref){var data=_ref.data,property=_ref.property,number=_ref.number;var svgRef=useRef();var wrapperRef=useRef();var dimensions=useResizeObserver(wrapperRef);useEffect(function(){var svg=select(svgRef.current);if(!dimensions)return;//Daten filtern\nvar filtered=data.filter(function(a){return a.geo==property;});var width=dimensions.width/1.5;var outerRadius=width/2;var innerRadius=0;var pied=pie().value(function(d){return d.time[Object.keys(d.time)[number]];})(filtered);var color=scaleOrdinal().domain(pied).range([\"#2770bc\",\"#5d8dbe\",\"#9aadc2\"]);function update(pied){var piechart=svg.selectAll(\"path\").data(pied);var arcGenerator=arc().innerRadius(innerRadius).outerRadius(outerRadius);piechart.enter().append('path').merge(piechart).transition().duration(500).attr('d',arcGenerator).attr('fill',function(d,i){return color(i);}).attr(\"stroke\",\"white\").style(\"stroke-width\",\"2px\").style(\"opacity\",1);piechart.enter().append(\"text\").attr(\"transform\",function(d){return\"translate(\"+arcGenerator.centroid(d)+\")\";}).attr(\"text-anchor\",\"middle\").text(function(d){return d.data.ed;}).attr(\"fill\",\"white\").attr(\"font-size\",11);piechart.enter().append(\"text\").attr(\"transform\",function(d){return\"translate(\"+arcGenerator.centroid(d)+\")\";}).attr(\"text-anchor\",\"end\").text(function(d){return d.data.value;}).attr(\"fill\",\"white\").attr(\"font-size\",11);piechart.exit().remove();}update(pied);},[data,dimensions,property]);return React.createElement(\"div\",{ref:wrapperRef},React.createElement(\"svg\",{ref:svgRef}));}export default PieMobilNutzung;","map":{"version":3,"sources":["D:/Studium/Bachelor/FinalHelper/src/components/charts/MobilChartBildung.jsx"],"names":["React","useRef","useEffect","select","arc","scaleOrdinal","pie","useResizeObserver","PieMobilNutzung","data","property","number","svgRef","wrapperRef","dimensions","svg","current","filtered","filter","a","geo","width","outerRadius","innerRadius","pied","value","d","time","Object","keys","color","domain","range","update","piechart","selectAll","arcGenerator","enter","append","merge","transition","duration","attr","i","style","centroid","text","ed","exit","remove"],"mappings":"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","sourcesContent":["import React, { useRef, useEffect} from \"react\";\r\nimport { select, arc, scaleOrdinal, pie} from 'd3';\r\nimport useResizeObserver from \"./useReziseObserver\";\r\n\r\n\r\nfunction PieMobilNutzung({ data, property, number }) {\r\n    const svgRef = useRef();\r\n    const wrapperRef = useRef();\r\n    const dimensions = useResizeObserver(wrapperRef);\r\n    \r\n    useEffect(() => {\r\n        const svg = select(svgRef.current);\r\n\r\n        if(!dimensions) return;\r\n\r\n        //Daten filtern\r\n        var filtered = data.filter(a=>a.geo==property);\r\n\r\n        var width = dimensions.width /1.5 ;\r\n        var outerRadius = width/2;\r\n        var innerRadius = 0;\r\n\r\n        var pied = pie().value((d) => d.time[Object.keys(d.time)[ number]])(filtered);\r\n\r\n        var color = scaleOrdinal()\r\n        .domain(pied)\r\n        .range([\"#2770bc\",\"#5d8dbe\",\"#9aadc2\"])\r\n\r\n        function update(pied) {\r\n        var piechart = svg.selectAll(\"path\").data(pied)\r\n        \r\n            var arcGenerator = arc()\r\n            .innerRadius(innerRadius)\r\n            .outerRadius(outerRadius)\r\n           \r\n            piechart\r\n            .enter()\r\n            .append('path')\r\n            .merge(piechart)\r\n            .transition()\r\n            .duration(500)\r\n            .attr('d', arcGenerator)\r\n            .attr('fill', function(d, i) { return color(i) })\r\n            .attr(\"stroke\", \"white\")\r\n            .style(\"stroke-width\", \"2px\")\r\n            .style(\"opacity\", 1)\r\n         \r\n            piechart\r\n            .enter()\r\n            .append(\"text\")\r\n            .attr(\"transform\", function(d) {\r\n            return \"translate(\" + arcGenerator.centroid(d) + \")\";})\r\n            .attr(\"text-anchor\", \"middle\")\r\n            .text(function(d) {return d.data.ed})\r\n            .attr(\"fill\", \"white\")\r\n            .attr(\"font-size\", 11)\r\n            piechart\r\n            .enter()\r\n            .append(\"text\")\r\n            .attr(\"transform\", function(d) {\r\n            return \"translate(\" + arcGenerator.centroid(d) + \")\";})\r\n            .attr(\"text-anchor\", \"end\")\r\n            .text(function(d) {return d.data.value})\r\n            .attr(\"fill\", \"white\")\r\n            .attr(\"font-size\", 11)\r\n            \r\n            piechart\r\n            .exit()\r\n            .remove()\r\n        \r\n        }\r\n        \r\n        update(pied)\r\n\r\n    }, [data, dimensions, property]);\r\n\r\n\r\nreturn (\r\n    <div ref={wrapperRef} >\r\n       <svg ref={svgRef}>\r\n       </svg>\r\n     </div>\r\n );\r\n }\r\n \r\n export default PieMobilNutzung;"]},"metadata":{},"sourceType":"module"}
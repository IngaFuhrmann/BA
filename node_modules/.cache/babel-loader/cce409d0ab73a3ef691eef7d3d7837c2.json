{"ast":null,"code":"import React,{useRef,useEffect}from\"react\";import{select,axisBottom,axisLeft,scaleLinear,scaleBand}from'd3';import useResizeObserver from\"./useReziseObserver\";function BarNutzungsGründe(_ref){var data=_ref.data,property=_ref.property,year=_ref.year;var svgRef=useRef();var wrapperRef=useRef();var dimensions=useResizeObserver(wrapperRef);useEffect(function(){var svg=select(svgRef.current);if(!dimensions)return;var xScale=scaleLinear().domain([0,100]).range([0,dimensions.width]);var yScale=scaleBand().domain(data.map(function(value,index){return value.geo;})).range([20,dimensions.height]).padding(0.1);var xAxis=axisBottom(xScale).ticks(4);svg.style('font-size','10').style('color','grey').select(\".x-axis\").call(xAxis);var yAxis=axisLeft(yScale).tickPadding(5).tickSizeOuter(0).tickSizeInner(0);svg.select(\".y-axis\").style('font-size','10').style('color','grey').call(yAxis);var nutzBars=svg.selectAll(\".bar\").data(data).join(\"rect\").attr(\"class\",\"bar\").attr(\"fill\",\"grey\").style(\"margin-top\",\"10px\");nutzBars.transition().duration(500).attr('x',xScale(0)).attr('y',function(s){return yScale(s.geo);}).attr('width',function(s){return xScale(s[property][Object.keys(s[property])[year]]);}).attr('height',yScale.bandwidth);nutzBars.on(\"mouseenter\",function(value,index){svg.selectAll(\".tooltip\").data([value]).join(function(enter){return enter.append(\"text\");}).attr(\"class\",\"tooltip\").text(value[property][Object.keys(value[property])[year]]+\"%\").attr(\"x\",xScale(value[property][Object.keys(value[property])[year]])-30).attr(\"y\",yScale(value.geo)+yScale.bandwidth()/1.4).attr(\"opacity\",1).transition().attr(\"fill\",\"white\");}).on(\"mouseleave\",function(){return svg.select(\".tooltip\").remove().transition();}).on(\"click\",clicked);function clicked(d,i){svg.selectAll('rect').attr('fill',\"grey\");select(this).transition().attr(\"fill\",\"#2770bc\");}},[data,dimensions,property,year]);return React.createElement(\"div\",{className:\"chartWrap\",ref:wrapperRef,style:{height:650,width:600}},React.createElement(\"svg\",{ref:svgRef},React.createElement(\"g\",{className:\"x-axis\"}),React.createElement(\"g\",{className:\"y-axis\"})));}export default BarNutzungsGründe;","map":{"version":3,"sources":["D:/Studium/Bachelor/FinalHelper/src/components/charts/NutzungsgründeChart.jsx"],"names":["React","useRef","useEffect","select","axisBottom","axisLeft","scaleLinear","scaleBand","useResizeObserver","BarNutzungsGründe","data","property","year","svgRef","wrapperRef","dimensions","svg","current","xScale","domain","range","width","yScale","map","value","index","geo","height","padding","xAxis","ticks","style","call","yAxis","tickPadding","tickSizeOuter","tickSizeInner","nutzBars","selectAll","join","attr","transition","duration","s","Object","keys","bandwidth","on","enter","append","text","remove","clicked","d","i"],"mappings":"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","sourcesContent":["import React, { useRef, useEffect} from \"react\";\r\nimport { select, axisBottom, axisLeft, scaleLinear, scaleBand,} from 'd3';\r\nimport useResizeObserver from \"./useReziseObserver\";\r\n\r\n\r\nfunction BarNutzungsGründe({ data, property, year }) {\r\n   const svgRef = useRef();\r\n   const wrapperRef = useRef();\r\n   const dimensions = useResizeObserver(wrapperRef);\r\n  \r\n   useEffect(() => {\r\n\r\n    const svg = select(svgRef.current);\r\n     \r\n    if(!dimensions) return;\r\n\r\n    const xScale = scaleLinear()\r\n    .domain([0, 100])\r\n   .range([0, dimensions.width])\r\n   \r\n  \r\n    const yScale =  scaleBand()\r\n   .domain(data.map((value, index) => value.geo))\r\n   .range([20, dimensions.height ])\r\n   .padding(0.1)\r\n\r\n   const xAxis = axisBottom(xScale).ticks(4);\r\n       svg\r\n       .style('font-size', '10')\r\n       .style('color', 'grey')\r\n     .select(\".x-axis\")\r\n     .call(xAxis);\r\n    \r\n     const yAxis = axisLeft(yScale)\r\n           \r\n          .tickPadding(5)\r\n          .tickSizeOuter(0)\r\n          .tickSizeInner(0);\r\n          svg\r\n            .select(\".y-axis\")\r\n            .style('font-size', '10')\r\n            .style('color', 'grey')\r\n            .call(yAxis)\r\n          \r\n            \r\n          const nutzBars = svg.selectAll(\".bar\")\r\n          .data(data)\r\n          .join(\"rect\")\r\n          .attr(\"class\", \"bar\")\r\n          .attr(\"fill\", \"grey\")\r\n          .style(\"margin-top\", \"10px\")\r\n\r\n          nutzBars\r\n          .transition()\r\n          .duration(500)\r\n          .attr('x', xScale(0))\r\n          .attr('y', (s) => yScale(s.geo))\r\n          .attr('width', (s) => xScale(s[property][Object.keys(s[property])[year]]))\r\n          .attr('height', yScale.bandwidth)\r\n          \r\n          nutzBars.on(\"mouseenter\", (value, index) => {\r\n            svg\r\n              .selectAll(\".tooltip\")\r\n              .data([value])\r\n              .join(enter => enter.append(\"text\"))\r\n              .attr(\"class\", \"tooltip\")\r\n              .text(value[property][Object.keys(value[property])[year]] + \"%\")\r\n              .attr(\"x\", xScale(value[property][Object.keys(value[property])[year]]) - 30)\r\n              .attr(\"y\", yScale(value.geo) + yScale.bandwidth() / 1.4)\r\n              .attr(\"opacity\", 1)\r\n              .transition()\r\n              .attr(\"fill\", \"white\")\r\n            })\r\n            .on(\"mouseleave\", () => \r\n              svg.select(\".tooltip\").remove()\r\n              .transition() )\r\n            \r\n            .on(\"click\", clicked)\r\n\r\n            function clicked(d,i) {\r\n              svg.selectAll('rect').attr('fill', \"grey\");\r\n              select(this).transition().attr(\"fill\", \"#2770bc\");\r\n            }\r\n   \r\n}, [data, dimensions, property, year]);\r\nreturn (\r\n <div className=\"chartWrap\" ref={wrapperRef} style={{height: 650, width: 600}} >\r\n    <svg ref={svgRef}>\r\n      <g className=\"x-axis\" />\r\n      <g className=\"y-axis\" />\r\n    </svg>\r\n  </div>\r\n);\r\n}\r\n\r\nexport default BarNutzungsGründe;"]},"metadata":{},"sourceType":"module"}